<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="My high level API for making server-authoritative games on top of my network stack">
	
	<link rel="icon" type="image/x-icon" href="/favicon.ico" sizes="48x48"/>
	<link rel="shortcut icon" href="/favicon.ico"/>
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"/>
	<link rel="manifest" href="/site.webmanifest"/>

	<title>Authoritative Netcode</title>
	<!-- Bootstrap -->
	<link href="/css/bootstrap-4.4.1.css" rel="stylesheet">
	<link href="/css/util.css" rel="stylesheet">
</head>

<body>
	<div id="fullpage" onclick="this.style.display='none';" style="cursor:zoom-out" tabindex="-1" aria-hidden="true"></div>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a class="navbar-brand" href="/index.html">tobo.games</a>
      	<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      	<span class="navbar-toggler-icon"></span>
      	</button>
      	<div class="collapse navbar-collapse" id="navbarSupportedContent">
        	<ul class="navbar-nav mr-auto">
				<li class="nav-item">
            		<a class="nav-link" href="/Blog/index.html">Blog</a>
          		</li>
				<!--
				<li class="nav-item">
            		<a class="nav-link" href="/portfolio.html">Portfolio</a>
          		</li>
				-->
          		
				<!--
          		<li class="nav-item dropdown">
            		<a class="nav-link dropdown-toggle" href="#" id="projectDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            		Projects
            		</a>
            		<div class="dropdown-menu" aria-labelledby="projectDropdown">
					  	<a class="dropdown-item" href="/Projects/index.html">Projects Home Page</a>
						<div class="dropdown-divider"></div>
					  	<a class="dropdown-item" href="/Projects/Personal/index.html">Game Dev - Personal</a>
					  	<a class="dropdown-item" href="/Projects/School/index.html">Game Dev - School</a>
						<a class="dropdown-item" href="/Projects/Engineering/index.html">Engineering</a>
            		</div>
          		</li>
				-->
				<li class="nav-item">
            		<a class="nav-link" href="/index.html#projects">Projects</a>
          		</li>
				<li class="nav-item dropdown">
            		<a class="nav-link dropdown-toggle" href="#" id="contactDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            		Contact
            		</a>
            		<div class="dropdown-menu" aria-labelledby="contactDropdown">
					  	<a class="dropdown-item p-1" href="mailto:evandaveikis@gmail.com" aria-label="Email">
							<img src="/images/email-icon.svg" width="20" height="20" alt="Email icon">
							Send Email
						</a>
    					<a class="dropdown-item p-1" href="https://github.com/tobogganeer" target="_blank" rel="noopener" aria-label="GitHub">
							<img src="/images/github-mark.svg" width="20" height="20" alt="Github logo">
							GitHub Profile
						</a>
						<a class="dropdown-item p-1" href="https://itch.io/profile/tobogganeer" target="_blank" rel="noopener" aria-label="Itch.io">
							<img src="/images/itchio-logo-textless-black.svg" width="20" height="20" alt="Github logo">
							Itch.io Page
						</a>
            		</div>
          		</li>
				<li class="nav-item">
            		<a class="nav-link" href="/about.html">About</a>
          		</li>
				<li class="nav-item">
            		<a class="nav-link" href="/VVGamesLauncher.exe" role="button" download>Download Launcher</a>
          		</li>
        	</ul>
      	</div>
    </nav>
    <section>
      	<div class="jumbotron text-center mt-2 p-4">
        	<div class="container">
          		<div class="row justify-content-center">
            		<div class="col-12">
           			  	<h1 style="font-size: 4rem">Authoritative Netcode</h1>
						<p style="font-size: 1.25rem">Prediction, Reconciliation, and Lag Compensation implemented on top of my custom networking stack in Unity.
							<br>
							General purpose high-level API demonstrated with a small FPS demo.
							<br>
							Read the <a href="/Blog/04_12_25_NetcodeIntro/index.html" target="_blank">blog posts</a> or check out the <a href="https://github.com/Tobogganeer/AuthoritativeNetcode" target="_blank">source code on GitHub</a>.</p>
						<!--<p><a class="btn btn-secondary" href="../index.html" role="button">&lt; Back to project list</a></p>-->
						<p><a class="btn btn-secondary" href="/index.html#projects" role="button">&lt; Back to project list</a></p>
            		</div>
          		</div>
			</div>
      	</div>
    </section>
    <section>
		<div class="container">
			
			<!-- Images -->
			<div class="row">

				<!-- Big image -->
				<div class="col-12 col-lg-6">
					<div class="img-box img-big">
						<span class="img-label">Gameplay</span>
						<img src="Images/gameplay.gif" class="click-to-zoom img-border" alt="4 players running around and shooting at each other">
					</div>
				</div>

				<!-- Medium images -->
				<div class="col-12 col-lg-3">
					<div class="row no-gutters">
						<div class="col-6 col-lg-12">
							<div class="img-box img-small">
								<span class="img-label">Effects</span>
								<img src="Images/effects.gif" class="click-to-zoom img-border" alt="Clip showcasing ragdolls, muzzle flash, blood effects">
							</div>
						</div>
						<div class="col-6 col-lg-12">
							<div class="img-box img-small">
								<span class="img-label">Reconcilation</span>
								<img src="Images/reconciliation.gif" class="click-to-zoom img-border" alt="Gif showing debug gizmos of reconciliation in action">
							</div>
						</div>
					</div>
				</div>
				<div class="col-12 col-lg-3">
					<div class="row no-gutters">
						<div class="col-6 col-lg-12">
							<div class="img-box img-small">
								<span class="img-label">Rollback</span>
								<img src="Images/rollback.gif" class="click-to-zoom img-border" alt="Video showing hitboxes rolling back to account for RTT">
							</div>
						</div>
						<div class="col-6 col-lg-12">
							<div class="img-box img-small">
								<span class="img-label">Debugging</span>
								<img src="Images/bugs.gif" class="click-to-zoom img-border" alt="Video of input bug, with player rubber banding">
							</div>
						</div>
					</div>
				</div>

		  	</div>
			
			<!-- Text -->
			<hr>
			
			<div class="row">
				
				<div class="col-md-5 col-lg-2 card">
					<div class="card-body px-0">
						<h2>Tools</h2>
						<ul class="list-group">
							<li class="list-group-item py-1 pl-3">Unity Engine</li>
							<li class="list-group-item py-1 pl-3">Blender &amp; Substance Painter</li>
							<li class="list-group-item py-1 pl-3">Excel (task tracking)</li>
							<li class="list-group-item py-1 pl-3">Github</li>
						</ul>
					</div>
				</div>
				<div class="col-md-7 col-lg-4 card">
					<div class="card-body px-0">
						<h2>Roles</h2>
						<h5>Programming</h5>
						<ul>
							<li>Research and implement lag-compensating techniques on top of my netcode stack</li>
							<li>Make API easy to use for future projects</li>
						</ul>
						
						<h5>Research &amp; Documentation</h5>
						<ul>
							<li>Compile lag-compensating techniques from online articles and GDC talks</li>
							<li>Explain system architecture on blogs to other people can learn from it</li>
						</ul>
						
						<h5>Everything else</h5>
						<ul>
							<li>It is a personal project</li>
							<li>Models, textures, audio, etc. by me*</li>
							<li><small>*shotgun geometry created by my roommate</small></li>
						</ul>
					</div>
				</div>
				<div class="col-12 col-lg-6 card">
					<div class="card-body px-0">
						<h2>Challenges</h2>

						<h5>Mental Models</h5>
						<p>Lag compensation (and netcode overall) is a large topic with many different approaches. It took a lot of research to wrap my head around what we use to overcome lag in server-authoritative games and <em>why</em> we use these techniques. Once everything "clicked" together in my head, the code itself came naturally.</p>
						
						<h5>Obscure Bugs</h5>
						<p>Some bugs were difficult to track down - a missing "+" in the tick accumulation in TickManager.cs would break server reconciliation. What really helped track down these bugs were useful debugging visualizations - suddenly I could see that old state was being applied. Creating various visualizations helped me track down all these tricky bugs.</p>
					</div>
				</div>
				
			</div>
			
			<hr>
			
			<div class="row">
				
				<div class="col-12 col-lg-4">
					<h2>Skills Gained</h2>
					<h5>Server-Authoritative Netcode</h5>
					<p>I've finally wrapped my head around prediction, reconciliation, and lag compensation. Instead of building client-authoritative games, I can make responsive games that are much more resilient to cheating.</p>
					
					<h5>Use of Tobo.Net</h5>
					<p>Every time I use my netcoe library (Tobo.Net), I find aspects that are annoying or hard to use and fix them. Making a different kind of project with my netcode let me iron out more bugs and identify some shortcomings (like excessive garbage allocation). The library will continue to improve with every project I make.</p>
				</div>
				<div class="col-12 col-lg-8">
					<h2>Takeaways</h2>
					<h5>Visualizations are extremely helpful for debugging</h5>
					<p>Especially for complex, interwoven systems, being able to <em>see</em> what is going on under-the-hood helps you identify the root causes of a problem.</p>
					
					<h5>Netcode is Complex</h5>
					<p>It takes time, effort, and research. You need all the pieces in place to get actual results - without reconciliation your prediction won't feel good. You will run into frustrating bugs.</p>
					
					<h5>Netcode is Theory Heavy</h5>
					<p>Understanding how each concept works and why it is needed is the important part to implement this netcode. The actual code comes naturally from the theory.</p>
					
					<h5>Netcode is Bespoke</h5>
					<p>Creating netcode for a platform fighter is very different from an open world MMORPG, and youâ€™ll need to tailor it to your project. However, the theory is similar and useful no matter what direction you go.</p>
					
					<h5>... But you can make server-authoritative netcode too</h5>
					<p>I might make it sound daunting, but once you understand the theory it is a fun challenge. There are <a href="/Blog/04_12_25_NetcodeIntro/index.html#resources" target="_blank">plenty of resources</a> out there to learn from.</p>
					
					<h5>Overcoming challenge is satisfying</h5>
					<p>I love programming because it lets me solve problems. If get satisfaction from solving puzzles or overcoming challenge, fixing a bug or seeing everything come together with your netcode will have you jumping in your chair.</p>
				</div>
				
			</div>
			
			<div class="separator"></div>
			
			<h1 class="text-center">Example of helpful visualizations</h1>
			
			<div class="row">
				<div class="col gallery">
					<figure>
						<img src="Images/novis.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif showing player needing to lead shots">
						<figcaption>Rollback should be working here - why do I need to lead my shots? Let's make some visualizations to find out</figcaption>
					</figure>
				</div>
			</div>
			<div class="row">
				<div class="col gallery">
					<figure>
						<img src="Images/rollbackvisualization.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif showing hitbox colliders all over the place">
						<figcaption>The server positions (red) are overlapping the rolled back positions (blue)... and they are all over the place.
						<br>
						This suggested two problems: rolling back time was incorrect (rolled back position is the same as present), and the rollback buffer was being used incorrectly (positions from hundreds of ticks ago still in the buffer)</figcaption>
					</figure>
				</div>
				<div class="col gallery">
					<figure>
						<img src="Images/rollback.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif showing correct hitbox colliders">
						<figcaption>After fixing those issues, it works as expected. Colliders are rolled back to where I am aiming (there is simulated lag)</figcaption>
					</figure>
				</div>
			</div>
			
			<hr>
			
			<h1 class="text-center">Gallery</h1>
			
			<div class="row">
				<div class="col gallery">
					<figure>
						<img src="Images/inputbug.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif showing snappy incorrect movement">
						<figcaption>A change to player movment led to a regression bug with reconciliation. It led to this snappy movement - the velocity that was being re-predicted was incorrect</figcaption>
					</figure>
				</div>
				<div class="col gallery">
					<figure>
						<img src="Images/jumpreconciliationbug.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif showing lots of gizmos when in the air">
						<figcaption>Similar story - incorrect syncing of vertical velocity meant mispredictions</figcaption>
					</figure>
				</div>
			</div>
			
			<div class="row">
				<div class="col gallery">
					<figure>
						<img src="Images/ragdollshot.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif showing a ragdoll spawning when a player is shot">
						<figcaption>Adding ragdolls when shooting players. The y position is clearly not quite correct here</figcaption>
					</figure>
				</div>
				<div class="col gallery">
					<figure>
						<img src="Images/netgunanims.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif of a player looking around and playing animations">
						<figcaption>Syncing animations over the network. Crouching is procedural</figcaption>
					</figure>
				</div>
			</div>
			
			<div class="row">
				<div class="col gallery">
					<figure>
						<img src="Images/reloadquick.gif" class="click-to-zoom height-300-scale-mobile" alt="Gif in blender showing reload animation">
						<figcaption>Third-person reload animation made in ~30 mins (I'm not known for my amazing animation skills)</figcaption>
					</figure>
				</div>
				<div class="col gallery">
					<figure>
						<img src="Images/timebug.gif" class="click-to-zoom height-300-scale-mobile" alt="">
						<figcaption>Bug with input buffer - I was resetting the tick timer instead of carrying over the difference, i.e. values were clamped to 16.6ms even if the frame took 10ms. This meant trying tp slightly speed up each tick did nothing, and it fell far behind.</figcaption>
					</figure>
				</div>
			</div>
			
      	</div>
    </section>
    <hr>
    <footer class="text-center">
      	<div class="container">
        	<div class="row">
          		<div class="col-12">
            		<p class="mb-0">Evan Daveikis 2026</p>
			  		<small class="mt-0 pb-3 text-muted">Very clearly not a web designer but I'm trying to learn!</small>
          		</div>
        	</div>
      	</div>
    </footer>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="/js/jquery-3.4.1.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="/js/popper.min.js"></script>
    <script src="/js/bootstrap-4.4.1.js"></script>
	<script src="/js/fullscreen-images.js"></script>
</body>
</html>